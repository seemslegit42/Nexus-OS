
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========== Base Layer Reset ========== */
html, body {
  @apply antialiased overflow-x-hidden;
  /* background-color: var(--background-main-color); Applied via :root */
  font-family: var(--font-main);
  scroll-behavior: smooth;
}

/* ========== Custom Root Theme Tokens ========== */
:root {
  /* Color Palette */
  --background-main-color: #1A2E2D; /* User defined */
  --panel-background-color: rgba(20, 48, 46, 0.75); /* User defined */
  --accent-primary-color: #40C0A0; /* User defined */
  --accent-secondary-color: #B8860B; /* User defined */
  --text-primary-color: #EAEAEA; /* User defined */
  --text-secondary-color: #A0A0A0; /* User defined */
  --status-success-color: #40C0A0; /* User defined (same as accent-primary) */
  --status-in-progress-color: #B8860B; /* User defined (same as accent-secondary) */
  --status-error-color: #D9534F; /* User defined */
  --border-color-main: rgba(64, 192, 160, 0.3); /* User defined */

  /* Typography (Actual font-family assigned in layout.tsx via --font-body and --font-headline) */
  --font-main: 'Lexend', sans-serif; /* User defined */
  --font-headline-comfortaa: 'Comfortaa', sans-serif; /* User defined, kept specific for headlines */
  
  --font-size-base: 16px; /* User defined */
  --font-size-small: 14px; /* User defined */
  --font-size-large: 20px; /* User defined */
  --font-size-h1: 32px; /* User defined */
  --font-size-h2: 24px; /* User defined */

  --font-weight-regular: 400; /* User defined */
  --font-weight-bold: 600; /* User defined */

  /* Spacing & Sizing (Base unit: 8px) */
  --spacing-xs: 4px;   /* User defined */
  --spacing-sm: 8px;   /* User defined */
  --spacing-md: 16px;  /* User defined */
  --spacing-lg: 24px;  /* User defined */
  --spacing-xl: 32px;  /* User defined */

  /* Borders & Radius */
  --border-radius-main: 12px;  /* User defined -> 0.75rem */
  --border-radius-small: 8px; /* User defined -> 0.5rem */
  --border-width-main: 1px;   /* User defined */

  /* Effects (Glassmorphism) */
  --panel-backdrop-filter: blur(12px); /* User defined */
  --panel-box-shadow: inset 0 1px 1px rgba(255, 255, 255, 0.05); /* User defined */
  --shadow-panel-outer: 0 8px 32px hsla(var(--primary) / 0.1), 0 4px 12px hsla(var(--primary) / 0.08); /* New outer shadow */
  /* --panel-border uses --border-color-main */


  /* ShadCN Compatibility - Mapped to new theme */
  /* Backgrounds */
  --background: 175 25% 14%; /* From --background-main-color: #1A2E2D */
  --foreground: 0 0% 92%; /* From --text-primary-color: #EAEAEA */
  
  /* Cards & Popovers */
  /* For --panel-background-color: rgba(20, 48, 46, 0.75) -> Opaque RGB(20,48,46) is HSL 175, 41%, 13% */
  --card: 175 41% 13% / 0.75; /* Directly use panel-background-color with alpha */
  --card-foreground: var(--foreground); /* Use text-primary */
  
  --popover: 175 41% 11% / 0.85; /* Similar to card, slightly darker/more opaque */
  --popover-foreground: var(--foreground);

  /* Primary Interactive Elements */
  --primary: 165 53% 50%; /* From --accent-primary-color: #40C0A0 */
  --primary-foreground: 165 53% 10%; /* Darker contrast for primary accent */

  /* Secondary Elements */
  --secondary: 43 89% 38%; /* From --accent-secondary-color: #B8860B */
  --secondary-foreground: 43 89% 90%; /* Lighter contrast for secondary accent */
  
  /* Muted Text & Borders for components */
  --muted: 175 25% 10%; /* Darker shade of main background */
  --muted-foreground: 0 0% 63%; /* From --text-secondary-color: #A0A0A0 */
  
  --accent: 165 53% 50%; /* Same as --primary for general accents */
  --accent-foreground: 165 53% 10%; /* Same as --primary-foreground */
  
  --destructive: 2 66% 61%; /* From --status-error-color: #D9534F */
  --destructive-foreground: 2 66% 95%; /* Lighter contrast for destructive */

  /* Borders & Inputs */
  --border: 165 53% 50% / 0.3; /* From --border-color-main: rgba(64, 192, 160, 0.3) */
  --input: 175 41% 13% / 0.85;  /* Similar to panel-background, slightly more opaque for inputs */
  --ring: 165 53% 50%;       /* Primary accent for focus rings */

  --radius: 0.75rem; /* From --border-radius-main: 12px */

  /* Chart Colors - Harmonized */
  --chart-1: hsl(var(--primary));
  --chart-2: 165 65% 60%; /* Lighter Jade */
  --chart-3: 165 45% 40%; /* Darker Jade */
  --chart-4: hsl(var(--secondary)); /* Accent Secondary */
  --chart-5: 0 0% 75%; /* Neutral for lines/text if needed */

  /* Scrollbar Variables */
  --scrollbar-track-bg: hsla(175, 25%, 14%, 0.6);
  --scrollbar-thumb-bg: hsla(0, 0%, 63%, 0.3);
  --scrollbar-thumb-hover-bg: hsla(0, 0%, 63%, 0.5);
  --scrollbar-thumb-border-color: hsla(175, 25%, 14%, 0.6);

  /* Command Observatory Specific Styles (Can be kept if distinct styling needed there) */
  --observatory-bg: var(--background-main-color); /* Use main background */
  --observatory-border: var(--border-color-main);
  --observatory-shadow: var(--panel-box-shadow);
}

/* Ensure Tailwind base styles use our custom properties for background and text */
@layer base {
  body {
    background-color: var(--background-main-color);
    color: var(--text-primary-color);
    font-family: var(--font-main); /* Ensure Lexend is default body font */
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-regular);
  }
  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-headline-comfortaa); /* Comfortaa for headlines */
    color: var(--text-primary-color);
  }
  h1 { font-size: var(--font-size-h1); }
  h2 { font-size: var(--font-size-h2); }
  h3 { font-size: var(--font-size-large); } /* Example mapping */

  * {
    border-color: hsl(var(--border)); /* Default border for components */
  }
}

/* ========== Global Utility Layer ========== */
.panel-glass {
  background: var(--panel-background-color);
  border: var(--border-width-main) solid var(--border-color-main);
  box-shadow: var(--panel-box-shadow), var(--shadow-panel-outer); /* Added outer shadow */
  backdrop-filter: var(--panel-backdrop-filter);
  border-radius: var(--border-radius-main);
}

.text-primary-custom { color: var(--text-primary-color); }
.text-secondary-custom { color: var(--text-secondary-color); }

.text-size-small { font-size: var(--font-size-small); }
.text-size-large { font-size: var(--font-size-large); }

.font-regular { font-weight: var(--font-weight-regular); }
.font-bold-custom { font-weight: var(--font-weight-bold); }


/* Other global styles from original file */
.glow-jade {
  box-shadow: 0 0 12px rgba(64, 192, 160, 0.5); /* Using accent-primary */
  border-color: rgba(64, 192, 160, 0.2);
}
/* ... (rest of the animations, RGL styles, scrollbar utilities) ... */

/* React Grid Layout specific styles */
.react-grid-layout {
  position: relative;
  transition: height 200ms ease;
}
.react-grid-item {
  transition: all 200ms ease;
  transition-property: left, top, width, height;
}
.react-grid-item.cssTransforms {
  transition-property: transform;
}
.react-grid-item.resizing {
  z-index: 1;
  will-change: width, height;
}

.react-grid-item.react-draggable-dragging {
  transition: none;
  z-index: 3;
  will-change: transform;
}

.react-grid-item.dropping {
  visibility: hidden;
}

.react-grid-item.react-grid-placeholder {
  background: hsl(var(--primary) / 0.2); 
  opacity: 0.5;
  transition-duration: 100ms;
  z-index: 2;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  -o-user-select: none;
  user-select: none;
  border-radius: var(--radius);
  border: 1px dashed hsl(var(--primary) / 0.4); 
  backdrop-filter: blur(2px);
}

.react-grid-item > .react-resizable-handle {
  position: absolute;
  width: 20px;
  height: 20px;
}

.react-grid-item > .react-resizable-handle::after {
  content: "";
  position: absolute;
  right: 2px;
  bottom: 2px;
  width: 10px;
  height: 10px;
  border-right: 2px solid hsl(var(--foreground) / 0.5);
  border-bottom: 2px solid hsl(var(--foreground) / 0.5);
  border-radius: 1px;
  opacity: 0.7;
  transition: opacity 0.2s ease-in-out;
}

.react-grid-item:hover > .react-resizable-handle::after {
  opacity: 1;
}

.react-resizable-hide > .react-resizable-handle {
  display: none;
}

/* Custom Scrollbar Styles using new tokens */
@layer utilities {
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  ::-webkit-scrollbar-track {
    background: var(--scrollbar-track-bg); 
    border-radius: 10px;
  }
  ::-webkit-scrollbar-thumb {
    background-color: var(--scrollbar-thumb-bg); 
    border-radius: 10px;
    border: 2px solid var(--scrollbar-thumb-border-color); 
    background-clip: padding-box;
  }
  ::-webkit-scrollbar-thumb:hover {
    background-color: var(--scrollbar-thumb-hover-bg); 
    border-color: var(--scrollbar-thumb-border-color); 
  }
  ::-webkit-scrollbar-corner {
    background: transparent;
  }
  * {
    scrollbar-width: thin;
    scrollbar-color: var(--scrollbar-thumb-bg) var(--scrollbar-track-bg); 
  }
}

/* Zone Shimmer Border */
@layer utilities {
  .zone-shimmer-border {
    position: relative;
    overflow: hidden;
  }
  .zone-shimmer-border::before {
    content: "";
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background-image: conic-gradient(
      transparent,
      transparent,
      transparent,
      rgba(64, 192, 160, 0.3), /* Changed from hsl(var(--accent) / 0.3) */
      rgba(64, 192, 160, 0.2), /* Changed from hsl(var(--primary) / 0.2) */
      transparent,
      transparent
    );
    animation: shimmer 4s linear infinite;
    z-index: -1; 
    border-radius: inherit; 
  }
  .zone-shimmer-border > * {
    position: relative; 
    z-index: 1;
  }
}

@keyframes shimmer {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
