@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========== Base Layer Reset ========== */
html, body {
  @apply antialiased overflow-x-hidden;
  font-family: var(--font-main);
  scroll-behavior: smooth;
}

/* ========== Custom Root Theme Tokens ========== */
:root {
  /* Color Palette - Greener Verdigris, Purple, Aquamarine Theme */
  --background-main-color: hsl(160, 25%, 14%); /* Greener Verdigris Background */
  --panel-background-color: hsla(160, 25%, 11%, 0.75); /* Greener Verdigris Panel */
  --accent-primary-color: hsl(271, 76%, 53%); /* Purple */
  --accent-secondary-color: hsl(170, 70%, 55%); /* Aquamarine */
  --text-primary-color: #EAEAEA;
  --text-secondary-color: #A0A0A0;
  --status-success-color: hsl(170, 70%, 55%); /* Aquamarine for success */
  --status-in-progress-color: hsl(271, 45%, 65%); /* Lighter Purple for in-progress/warning */
  --status-error-color: #D9534F; /* Muted Red for error */
  --border-color-main: hsla(271, 76%, 53%, 0.3); /* Purple Glow Border */

  /* HSL versions for easier manipulation in JS/animations if needed */
  --primary-hsl: 271 76% 53%;
  --secondary-hsl: 170 70% 55%;
  --secondary-foreground-hsl: 170 70% 15%; /* Dark Teal for Aquamarine contrast */


  /* Typography */
  --font-main: 'Lexend', sans-serif;
  --font-headline-comfortaa: 'Comfortaa', sans-serif;
  
  --font-size-base: 16px;
  --font-size-small: 14px;
  --font-size-large: 20px;
  --font-size-h1: 32px;
  --font-size-h2: 24px;

  --font-weight-regular: 400;
  --font-weight-bold: 600;

  /* Spacing & Sizing */
  --spacing-xs: 4px;
  --spacing-sm: 8px;
  --spacing-md: 16px;
  --spacing-lg: 24px;
  --spacing-xl: 32px;

  /* Borders & Radius */
  --border-radius-main: 12px;
  --border-radius-small: 8px;
  --border-width-main: 1px;

  /* Effects (Glassmorphism) */
  --panel-backdrop-filter: blur(14px) saturate(110%); /* Enhanced */
  --panel-box-shadow: inset 0 1px 1px rgba(255, 255, 255, 0.05);
  /* shadow-panel-outer will be handled by animation for cards, or a static var for other elements */
  --shadow-panel-outer-static: 0 8px 32px hsla(var(--primary-hsl) / 0.1), 0 4px 12px hsla(var(--primary-hsl) / 0.08);


  /* ShadCN Compatibility - Mapped to new theme */
  /* Backgrounds */
  --background: 160 25% 14%; /* Greener Verdigris */
  --foreground: 0 0% 92%; /* Text Primary (#EAEAEA) */
  
  /* Cards & Popovers */
  --card: 160 25% 11%; /* Opaque Greener Verdigris Panel for card bg */
  --card-foreground: var(--foreground); /* Text Primary on cards */
  
  /* Popover defaults to Greener Verdigris base, Tooltip overrides specifically */
  --popover: 160 25% 9% / 0.85; /* Slightly darker/more opaque Greener Verdigris panel for popovers */
  --popover-foreground: var(--foreground); /* Text Primary on popovers */

  /* Primary Interactive Elements */
  --primary: 271 76% 53%; /* Purple */
  --primary-foreground: 271 76% 95%; /* Light Lavender for Purple contrast */

  /* Secondary Elements */
  --secondary: 170 70% 55%; /* Aquamarine */
  --secondary-foreground: 170 70% 15%; /* Dark Teal for Aquamarine contrast */
  
  /* Muted Text & Borders for components */
  --muted: 160 25% 9%; /* Darker shade of Greener Verdigris background for muted elements */
  --muted-foreground: 0 0% 63%; /* Text Secondary (#A0A0A0) */
  
  --accent: 271 76% 53%; /* Purple for general accents (can be same as primary) */
  --accent-foreground: 271 76% 95%; /* Light Lavender for Purple contrast */
  
  --destructive: 2 66% 61%; /* Error Red (D9534F) */
  --destructive-foreground: 2 66% 95%; /* Light contrast for destructive */

  /* Borders & Inputs */
  --border: 271 76% 45%;       /* Slightly darker, opaque Purple for general component borders */
  --input: 160 25% 11% / 0.85;  /* Opaque Greener Verdigris Panel for inputs */
  --ring: 271 76% 53%;       /* Purple for focus rings */

  --radius: 0.75rem; /* From --border-radius-main: 12px */

  /* Chart Colors - Harmonized with Purple/Aquamarine */
  --chart-1: hsl(var(--primary)); /* Purple */
  --chart-2: 271 60% 65%; /* Lighter Purple */
  --chart-3: 271 80% 45%; /* Darker Purple */
  --chart-4: hsl(var(--secondary)); /* Aquamarine */
  --chart-5: 0 0% 75%; /* Neutral Grey */

  /* Scrollbar Variables (Aquamarine Theme with Greener Verdigris track) */
  --scrollbar-track-bg: hsla(160, 25%, 14%, 0.6); /* Greener Verdigris based track */
  --scrollbar-thumb-bg: hsla(170, 70%, 55%, 0.5); /* Aquamarine thumb */
  --scrollbar-thumb-hover-bg: hsla(170, 70%, 55%, 0.7); /* Aquamarine thumb hover */
  --scrollbar-thumb-border-color: hsla(160, 25%, 14%, 0.6); /* Greener Verdigris based border */

  /* Command Observatory Specific Styles */
  --observatory-bg: var(--background-main-color);
  --observatory-border: var(--border-color-main); 
  --observatory-shadow: var(--panel-box-shadow);
}

/* Ensure Tailwind base styles use our custom properties for background and text */
@layer base {
  body {
    background-color: var(--background-main-color);
    color: var(--text-primary-color);
    font-family: var(--font-main);
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-regular);
  }
  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-headline-comfortaa);
    color: var(--text-primary-color);
  }
  h1 { font-size: var(--font-size-h1); }
  h2 { font-size: var(--font-size-h2); }
  h3 { font-size: var(--font-size-large); }

  * {
    border-color: hsl(var(--border)); /* Default border color for ShadCN components */
  }
}

/* ========== Global Utility Layer ========== */
.panel-glass {
  background: var(--panel-background-color);
  border: var(--border-width-main) solid var(--border-color-main);
  box-shadow: var(--panel-box-shadow), var(--shadow-panel-outer-static); /* Use static outer shadow */
  backdrop-filter: var(--panel-backdrop-filter);
  border-radius: var(--border-radius-main);
}

.text-primary-custom { color: var(--text-primary-color); }
.text-secondary-custom { color: var(--text-secondary-color); }

.text-size-small { font-size: var(--font-size-small); }
.text-size-large { font-size: var(--font-size-large); }

.font-regular { font-weight: var(--font-weight-regular); }
.font-bold-custom { font-weight: var(--font-weight-bold); }

.glow-purple { /* This class can be used for explicit purple glow on elements if needed */
  box-shadow: 0 0 12px hsla(var(--primary) / 0.5); 
  border-color: hsla(var(--primary) / 0.2);
}


/* React Grid Layout specific styles */
.react-grid-layout {
  position: relative;
  transition: height 200ms ease;
}
.react-grid-item {
  transition: all 200ms ease;
  transition-property: left, top, width, height;
}
.react-grid-item.cssTransforms {
  transition-property: transform;
}
.react-grid-item.resizing {
  z-index: 1;
  will-change: width, height;
}

.react-grid-item.react-draggable-dragging {
  transition: none;
  z-index: 3;
  will-change: transform;
}

.react-grid-item.dropping {
  visibility: hidden;
}

.react-grid-item.react-grid-placeholder {
  background: hsl(var(--primary) / 0.2); /* Purple placeholder */
  opacity: 0.5;
  transition-duration: 100ms;
  z-index: 2;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  -o-user-select: none;
  user-select: none;
  border-radius: var(--radius);
  border: 1px dashed hsl(var(--primary) / 0.4); /* Purple placeholder border */
  backdrop-filter: blur(2px);
}

.react-grid-item > .react-resizable-handle {
  position: absolute;
  width: 20px;
  height: 20px;
}

.react-grid-item > .react-resizable-handle::after {
  content: "";
  position: absolute;
  right: 2px;
  bottom: 2px;
  width: 10px;
  height: 10px;
  border-right: 2px solid hsl(var(--foreground) / 0.5);
  border-bottom: 2px solid hsl(var(--foreground) / 0.5);
  border-radius: 1px;
  opacity: 0.7;
  transition: opacity 0.2s ease-in-out;
}

.react-grid-item:hover > .react-resizable-handle::after {
  opacity: 1;
}

.react-resizable-hide > .react-resizable-handle {
  display: none;
}

/* Custom Scrollbar Styles using new theme variables */
@layer utilities {
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  ::-webkit-scrollbar-track {
    background: var(--scrollbar-track-bg); 
    border-radius: 10px;
  }
  ::-webkit-scrollbar-thumb {
    background-color: var(--scrollbar-thumb-bg); 
    border-radius: 10px;
    border: 2px solid var(--scrollbar-thumb-border-color); 
    background-clip: padding-box;
  }
  ::-webkit-scrollbar-thumb:hover {
    background-color: var(--scrollbar-thumb-hover-bg); 
    border-color: var(--scrollbar-thumb-border-color); 
  }
  ::-webkit-scrollbar-corner {
    background: transparent;
  }
  * {
    scrollbar-width: thin;
    scrollbar-color: var(--scrollbar-thumb-bg) var(--scrollbar-track-bg); 
  }
}

/* Zone Shimmer Border */
@layer utilities {
  .zone-shimmer-border {
    position: relative;
    overflow: hidden;
  }
  .zone-shimmer-border::before {
    content: "";
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background-image: conic-gradient(
      transparent,
      transparent,
      transparent,
      hsla(var(--primary-hsl) / 0.3), /* Purple shimmer */
      hsla(var(--primary-hsl) / 0.2), /* Lighter Purple shimmer */
      transparent,
      transparent
    );
    animation: shimmer 4s linear infinite;
    z-index: -1; 
    border-radius: inherit; 
  }
  .zone-shimmer-border > * {
    position: relative; 
    z-index: 1;
  }
}

@keyframes shimmer {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

/* Purple Pulsating Glow Animation for Cards */
@keyframes pulse-glow-purple {
  0%, 100% {
    box-shadow: var(--panel-box-shadow), 0 8px 32px hsla(var(--primary-hsl) / 0.1), 0 4px 12px hsla(var(--primary-hsl) / 0.08);
  }
  50% {
    box-shadow: var(--panel-box-shadow), 0 8px 45px hsla(var(--primary-hsl) / 0.18), 0 4px 20px hsla(var(--primary-hsl) / 0.12);
  }
}
